var providerNativeInterface={trigger:function(){var e=arguments[0],t=arguments[1],i=this.providerIdToProviderMap[t];if(i){var r=i.listenerDictionary[e];if(2==arguments.length)r();else{var s=[];Array.prototype.push.apply(s,arguments),s.shift(),s.shift(),r.apply(null,s)}}},providerIdToProviderMap:{}},mobileSdkNamespace=Object.assign(providerNativeInterface,window.jwplayer.mobileSdk);window.jwplayer.mobileSdk=mobileSdkNamespace,function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./src/providers/video-element-provider.ts")}({"./src/providers/video-element-provider.ts":
/*!*************************************************!*\
  !*** ./src/providers/video-element-provider.ts ***!
  \*************************************************/
/*! no static exports found */function(e,t){var i=window.jwplayer,r="android-sdk-provider",s=0,a=function(){function e(e,t,a){var n=this,o=i.utils,u=i(e).Events;Object.assign(this,u);var l=i.mobileSdk.providerPool;this.providerPool=l,this.exoPlayer=l.getProvider(),this.activeProviderTracker=window.activeProviderTracker,this.currentQuality=-1,this.currentAudioTrack=-1,this.currentSubtitleTrack=-1,this.playlistIndex=0,this.subtitleTracksDispatched=!1,this.name=r,this.state="idle",this.supportsPlaybackRate=!0,this.item=null,this.container=null,this.config=t,this.seeking=!1,this.seekFromTime=null,this.seekToTime=null,this.stallTime=null,this.currentSource={},this.providerId="id-"+s++,this.timeTicker=null,this.lastKnownSource=null,this.exoState={currentTime:0,position:0,duration:0,playbackRate:1,ended:!1,error:!1,levels:[],audioTracks:[],textTracks:[],bufferPercentage:0,seekableRange:{start:0,end:0},muted:!1},this.visualQuality={reason:"initial choice",mode:"auto",bitrate:0,level:{width:0,height:0,index:0,label:""}};var c={itemLoaded:function(){this.trigger("bufferFull"),this.startTimers()},state:function(e){"complete"===e&&"idle"!==this.state&&"complete"!==this.state&&this.trigger("complete"),"complete"===e&&(this.exoState.ended=!0,this.stopTimers()),"playing"===e&&"idle"===this.state&&this.trigger("providerFirstFrame"),"paused"===e&&"complete"===this.state||this.exoState.error||this.exoState.currentTime===this.exoState.duration||this.setState(e)},startOnSeek:function(e){},startTimers:function(){this.startTimers()},stopTimers:function(){this.stopTimers()},seekableRangeChanged:function(e,t){this.exoState.seekableRange={start:e,end:t}},firstFrame:function(){this.trigger("providerFirstFrame",{})},metadata:function(e){e.seekRange=this.exoState.seekableRange,this.trigger("meta",{metadata:e,drm:this.item.useswidevine?"widevine":void 0})},qualityLevels:function(e,t){if(!(this.item.sources&&this.item.sources.length>1)){var i=this.getQualityLevels();this.exoState.levels=e,1==i.length&&this.trigger("levels",{levels:e,currentQuality:t}),-1!=this.currentQuality&&this.currentQuality!=t&&this.setCurrentQuality(this.currentQuality)}},qualityChanged:function(e,t){this.trigger("levelsChanged",{currentQuality:t,levels:e})},visualQuality:function(e,t,i){var r={level:t,mode:e,reason:i};this.visualQuality=r,this.trigger("visualQuality",r)},playAttempt:function(){this.trigger("playAttempt",{})},audioTracks:function(e,t){if(this.exoState.audioTracks=e,this.trigger("audioTracks",{tracks:e,currentTrack:t}),"hls"===this.item.sources[0].type){var i="video";this.exoState.levels&&!this.exoState.levels.length&&this.exoState.tracks&&this.exoState.tracks.length&&(i="audio"),this.trigger("mediaType",{mediaType:i})}},subtitlesTracks:function(e,t){this.exoState.textTracks=e,this.trigger("subtitlesTracks",{tracks:e,currentTrack:t})},seeking:function(){var e=null!==this.seekToTime?this.timeToPosition(this.seekToTime):this.getCurrentTime(),t=this.timeToPosition(this.seekFromTime||0);this.seekFromTime=this.seekToTime,this.seekToTime=null,this.seeking=!0,this.trigger("seek",{position:t,offset:e})},seeked:function(){this.seeking&&(this.seeking=!1,this.updateExoTime(),this.trigger("seeked",{position:this.exoState.position}),this.startTimers())},playbackRateChanged:function(e){this.exoState.playbackRate=e,this.trigger("ratechange",{playbackRate:e})},warning:function(e){this.trigger("warning",{message:message})},error:function(e,t,i){this.currentSource={},this.trigger("mediaError",{key:e,exceptionIdentifier:i,code:t})},castingChanged:function(e){o.toggleClass(i().getContainer(),"jw-flag-casting",e)},click:function(e){this.trigger("click",e)},volume:function(e){this.trigger("volume",{volume:Math.round(100*e)}),this.trigger("mute",{mute:this.exoState.muted})}};this.listenerDictionary={},Object.keys(c).forEach((function(e){n.listenerDictionary[e]=c[e].bind(n)}))}e.supports=function(e){switch(e.type){case"hls":case"dash":case"aac":case"rtmp":case"mpd":case"mp4":case"mov":case"mp3":return!0;default:return!1}},e.getName=function(){return{name:r}},e.isLive=function(e){return-1===e},e.isDvr=function(e,t){return Math.abs(e)>=t};var t=e.prototype;return t.getName=function(){return e.getName()},t.attachMedia=function(){this.seeking=!1,this.seekFromTime=null,this.seekToTime=null,i.mobileSdk.providerIdToProviderMap[this.providerId]=this},t.detachMedia=function(){this.exoPlayer&&delete i.mobileSdk.providerIdToProviderMap[this.providerId]},t.init=function(e){var t=this.exoState.ended;this.initExoState(),this.exoState.ended=t,this.item=e,this.playlistIndex=this.config.playlist?this.config.playlist.indexOf(this.item):0,this.state="idle",this.currentQuality=-1,this.currentAudioTrack=-1,this.currentSubtitleTrack=-1,this.subtitleTracksDispatched=!1,this.exoPlayer.init(JSON.stringify(e),this.providerId,this.playlistIndex),this.attachMedia()},t.preload=function(e){this.item=e;var t=-1;if(e.sources)for(var i=0;i<e.sources.length;i++)if(e.sources[i].default){t=i;break}this.currentQuality=t>0?t:0,this.setVideoSource(e.sources[this.currentQuality]),this.completeLoad()},t.load=function(e){this.activeProviderTracker.setActiveProvider(this.providerId),this.item=e;var t=this.currentSource.src;void 0===t&&(t=this.lastKnownSource);var i=-1;if(e.sources)for(var r=0;r<e.sources.length;r++)if(e.sources[r].default){i=r;break}this.currentQuality=i>0?i:0,this.setVideoSource(e.sources[this.currentQuality]);var s=t!==this.currentSource.src;this.lastKnownSource=this.currentSource.src,s?this.completeLoad():(this.exoState.ended||this.exoState.currentTime>0||e.starttime>0)&&this.seek(this.exoState.position||e.starttime);var a=this.getQualityLevels();return a.length>1&&this.trigger("levels",{levels:a,currentQuality:this.currentQuality}),this.sendMediaType(e.sources),Promise.resolve()},t.volume=function(e){this.exoPlayer.volume(Math.min(Math.max(0,e/100),1))},t.mute=function(e){var t=!!e;this.exoState.muted=t,this.exoPlayer.mute(t)},t.resize=function(e,t,i){var r=this.exoPlayer;r.videoWidth,r.videoHeight},t.getContainer=function(){return this.container},t.setContainer=function(e){this.container=e},t.removeFromContainer=function(){this.container=null},t.remove=function(){this.stop(),this.destroy()},t.stop=function(){return this.seeking=!1,this.currentSource={},this.exoPlayer&&this.exoPlayer.stop(),this.stopTimers(),this.setState("idle"),Promise.resolve()},t.destroy=function(){this.off(),this.detachMedia(),this.initExoState(),this.item=null,this.seeking=!1,this.container=null,this.config=null,this.exoPlayer&&(this.exoPlayer.destroy(),this.providerPool.releaseProvider(this.exoPlayer),this.exoPlayer=null),this.audioTracksChangeHandler=null,this.subtitleTracksChangeHandler=null},t.supportsFullscreen=function(){return!0},t.setVisibility=function(e){},t.play=function(){return this.exoPlayer.play(),Promise.resolve()},t.pause=function(){return this.exoPlayer.pause(),Promise.resolve()},t.seek=function(e){return this.stopTimers(),this.seekToTime=e,this.seeking=!0,this.seekFromTime=this.exoState.position,this.exoPlayer.seek(this.seekToTime),Promise.resolve()},t.getPlaybackRate=function(){return this.exoState.playbackRate},t.setPlaybackRate=function(e){this.exoPlayer.setPlaybackRate(e)},t.getCurrentQuality=function(){return this.currentQuality},t.setCurrentQuality=function(e){var t=e>-1&&this.currentQuality!==e,i=this.item.sources&&this.item.sources.length>1,r=!1,s=null;if(t&&!i&&e<this.exoState.levels.length&&(r=!0,s=this.exoState.levels,this.exoPlayer.setCurrentQuality(e)),t&&i&&e<this.item.sources.length){r=!0,s=this.getQualityLevels();var a="playing"===this.state;this.setVideoSource(this.item.sources[e]),this.completeLoad(),a&&this.exoPlayer.play()}r&&(this.currentQuality=e,this.trigger("levelsChanged",{currentQuality:e,levels:s}))},t.getQualityLevels=function(){return this.exoState.levels&&this.exoState.levels.length?this.exoState.levels:this.item.sources.map((function(e,t){return{bitrate:e.bitrate||0,label:e.label||e.height+"p",width:e.width,height:e.height,index:t}}))},t.setCurrentAudioTrack=function(e){if(e>-1&&this.exoPlayer){var t=this.exoState.audioTracks;if(e===this.currentAudioTrack||!t||e>=t.length)return;this.exoPlayer.setCurrentAudioTrack(e),this.currentAudioTrack=e,t[e].enabled=!0;var i=[].slice.call(t).map((function(e){return{name:e.label||e.language,language:e.language}}));this.trigger("audioTrackChanged",{currentTrack:e,tracks:i})}},t.setSubtitlesTrack=function(e){this.dispatchSubtitleTracks();var t=e-1;if(t>-1&&this.exoPlayer&&this.exoPlayer.textTracks){var i=this.exoState.textTracks,r=[].slice.call(i).filter((function(e){return"subtitles"===e.kind}));if(t===this.currentSubtitleTrack||t>=r.length)return;this.currentSubtitleTrack=t,this.exoPlayer.setSubtitlesTrack(t),r.forEach((function(e){return e.mode="disabled"})),r[t].mode="showing",this.trigger("subtitlesTrackChanged",{currentTrack:e,tracks:r})}},t.getCurrentAudioTrack=function(){return this.exoPlayer.getCurrentAudioTrack()},t.getAudioTracks=function(){return this.exoPlayer.getAudioTracks()},t.getFullscreen=function(){return!1},t.setFullscreen=function(e){},t.getCurrentTime=function(){var t=this.exoState.currentTime,i=this.getSeekRange();return e.isLive(this.exoState.duration)&&e.isDvr(i.end-i.start,Math.max(this.config.minDvrWindow,30))?t-i.end:t},t.getDuration=function(){var t=this.exoState.duration;if(isNaN(t))return 0;var i=this.getSeekableEnd();if(e.isLive(this.exoState.duration)&&i){var r=i-this.getSeekableStart();e.isDvr(r,Math.max(this.config.minDvrWindow,30))&&(t=-r)}return t},t.getSeekRange=function(){return this.exoState.seekableRange},t.getSeekableStart=function(){return this.exoState.seekableRange.start},t.getSeekableEnd=function(){return this.exoState.seekableRange.end},t.timeToPosition=function(t){if(e.isLive(this.exoState.duration)){var i=this.getSeekRange();if(e.isDvr(i.end-i.start,Math.max(this.config.minDvrWindow,30)))return Math.min(0,t-i.end)}return t},t.atEdgeOfLiveStream=function(){if(!e.isLive(this.exoState.duration))return!1;return this.exoState.seekRange.end-this.exoState.currentTime<=2},t.getLiveLatency=function(){var t=null,i=this.getSeekableEnd();return e.isLive(this.exoState.duration)&&i&&(t=i-this.exoState.currentTime),t},t.initExoState=function(){this.exoState={currentTime:0,position:0,duration:0,playbackRate:1,ended:!1,error:!1,levels:[],audioTracks:[],textTracks:[],bufferPercentage:0,seekableRange:{start:0,end:0},muted:!1}},t.setVideoSource=function(e){var t=document.createElement("source");if(t.src=e.file,this.currentSource.src!==t.src){this.currentSource.src=e.file,this.currentSource.type=e.type;var i=!this.item.preload||"none"!=this.item.preload,r=this.playlistItemToJson(this.item),s=this.exoState.position||this.item.starttime;this.exoPlayer.setSource(e.file,e.type,r,s,i,this.exoState.playbackRate)}},t.playlistItemToJson=function(e){return JSON.stringify(e,(function(e,t){if("vastAd"!==e)return t}))},t.completeLoad=function(){this.stopTimers(),this.exoState.ended=!1,this.exoPlayer.load()},t.dispatchAudioTracks=function(){var e=this.exoState.audioTracks;if(e&&e.length){for(var t=[].slice.call(e),i=-1,r=0;r<t.length;r++)if(t[r].enabled){i=r;break}-1===i&&(i=0,e[0].enabled=!0);var s=t.map((function(e){return{name:e.label||e.language,language:e.language}}));this.trigger("audioTracks",{currentTrack:i,tracks:s})}},t.audioTracksChange=function(){for(var e=[].slice.call(this.exoState.audioTracks),t=-1,i=0;i<e.length;i++)if(e[i].enabled){t=i;break}this.setCurrentAudioTrack(t)},t.dispatchSubtitleTracks=function(){if(!this.subtitleTracksDispatched){var e=this.exoState.textTracks;if(e&&e.length){this.subtitleTracksDispatched=!0;var t=[].slice.call(e).filter((function(e){return"subtitles"===e.kind}));this.trigger("subtitlesTracks",{tracks:t})}}},t.subtitleTracksChange=function(){for(var e=this.exoState.textTracks,t=[].slice.call(e).filter((function(e){return"subtitles"===e.kind})),i=-1,r=0;r<t.length;r++)if("showing"===t[r].mode){i=r;break}this.setSubtitlesTrack(i+1)},t.stopTimers=function(){this.timeTicker&&(clearInterval(this.timeTicker),this.tickTimer(),this.timeTicker=null)},t.startTimers=function(){this.stopTimers(),this.timeTicker=setInterval(this.tickTimer.bind(this),this.exoPlayer.getTickInterval())},t.updateExoTime=function(){if(this.exoPlayer){var e=JSON.parse(this.exoPlayer.getWebTickData());this.exoState.position=e.position,this.exoState.currentTime=e.currentTime,this.exoState.duration=e.duration,this.exoState.bufferPercentage=e.bufferPercent}},t.tickTimer=function(){if(this.exoPlayer){var e=this.exoState.position,t=this.exoState.currentTime,i=this.exoState.duration,r=this.exoState.bufferPercentage;this.updateExoTime();var s=e!==this.exoState.position||t!==this.exoState.currentTime||i!==this.exoState.duration,a=r!==this.exoState.bufferPercentage,n=0!=this.exoState.duration,o="playing"==this.state;s&&n&&o&&this.trigger("time",{position:this.exoState.position,currentTime:this.exoState.currentTime,duration:this.exoState.duration,seekRange:this.exoState.seekableRange,metadata:{currentTime:this.exoState.currentTime}}),a&&n&&this.trigger("bufferChange",{bufferPercent:this.exoState.bufferPercentage,position:this.exoState.position,duration:this.exoState.duration,currentTime:this.exoState.currentTime,seekRange:this.exoState.seekableRange})}},e}();i.api.registerProvider(a)}});
